<div class="coin-page coin-invoice-page">
  <div class="coin-container">
    {{!-- é¡¶éƒ¨å¯¼èˆªæ  --}}
    <div class="coin-nav">
      <div class="coin-nav-left">
        <button class="coin-nav-back" {{on "click" this.goToCoinPage}}>
          <i class="fa-solid fa-arrow-left"></i>
        </button>
        <span class="coin-nav-icon">ğŸ“„</span>
        <span class="coin-nav-title">å‘ç¥¨è®°å½•</span>
      </div>
      <div class="coin-nav-right">
        <button class="coin-nav-btn" {{on "click" this.refreshData}}>
          <i class="fa-solid fa-arrows-rotate"></i>
        </button>
      </div>
    </div>

    {{!-- å¾…å¼€ç¥¨ --}}
    <div class="coin-section">
      <div class="section-header">
        <h2 class="section-title">
          <i class="fa-solid fa-clock"></i>
          <span>å¾…å¼€ç¥¨</span>
        </h2>
        <span class="section-badge warning">{{this.pendingInvoices.length}}</span>
      </div>
      <div class="invoice-list">
        {{#if this.pendingInvoices}}
          {{#each this.pendingInvoices as |invoice|}}
            <div class="invoice-card pending">
              <div class="invoice-left">
                <div class="invoice-icon pending">
                  <i class="fa-solid fa-hourglass-half"></i>
                </div>
                <div class="invoice-info">
                  <span class="invoice-amount">{{invoice.amount}} ç¡¬å¸</span>
                  <span class="invoice-reason">{{invoice.reason}}</span>
                  <span class="invoice-date">{{format-date invoice.created_at format="medium"}}</span>
                </div>
              </div>
              <div class="invoice-status pending">
                <i class="fa-solid fa-clock"></i>
                <span>å¾…å¤„ç†</span>
              </div>
            </div>
          {{/each}}
        {{else}}
          <div class="empty-state small">
            <i class="fa-solid fa-inbox"></i>
            <span>æš‚æ— å¾…å¼€ç¥¨è®°å½•</span>
          </div>
        {{/if}}
      </div>
    </div>

    {{!-- å·²å¼€ç¥¨ --}}
    <div class="coin-section">
      <div class="section-header">
        <h2 class="section-title">
          <i class="fa-solid fa-circle-check"></i>
          <span>å·²å¼€ç¥¨</span>
        </h2>
        <span class="section-badge success">{{this.completedInvoices.length}}</span>
      </div>
      <div class="invoice-list">
        {{#if this.completedInvoices}}
          {{#each this.completedInvoices as |invoice|}}
            <div class="invoice-card completed">
              <div class="invoice-left">
                <div class="invoice-icon completed">
                  <i class="fa-solid fa-check"></i>
                </div>
                <div class="invoice-info">
                  <span class="invoice-amount">{{invoice.amount}} ç¡¬å¸</span>
                  <span class="invoice-reason">{{invoice.reason}}</span>
                  {{#if invoice.admin_note}}
                    <span class="invoice-note">å¤‡æ³¨: {{invoice.admin_note}}</span>
                  {{/if}}
                  <span class="invoice-date">{{format-date invoice.updated_at format="medium"}}</span>
                </div>
              </div>
              <div class="invoice-actions">
                {{#if invoice.invoice_url}}
                  <a href="{{invoice.invoice_url}}" target="_blank" rel="noopener noreferrer" class="invoice-view-btn">
                    <i class="fa-solid fa-external-link"></i>
                    <span>æŸ¥çœ‹å‘ç¥¨</span>
                  </a>
                {{/if}}
                <div class="invoice-status completed">
                  <i class="fa-solid fa-check"></i>
                  <span>å·²å®Œæˆ</span>
                </div>
              </div>
            </div>
          {{/each}}
        {{else}}
          <div class="empty-state small">
            <i class="fa-solid fa-inbox"></i>
            <span>æš‚æ— å·²å¼€ç¥¨è®°å½•</span>
          </div>
        {{/if}}
      </div>
    </div>
  </div>

  {{!-- æˆåŠŸæç¤º --}}
  {{#if this.showSuccessMessage}}
    <div class="coin-toast success">
      <i class="fa-solid fa-circle-check"></i>
      <span>{{this.successMessage}}</span>
    </div>
  {{/if}}
</div>
