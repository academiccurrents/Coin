<div class="coin-page coin-pay-page">
  <div class="coin-container">
    {{!-- é¡¶éƒ¨å¯¼èˆªæ  --}}
    <div class="coin-nav">
      <div class="coin-nav-left">
        <button class="coin-nav-back" {{on "click" this.goBack}}>
          <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
        </button>
        <span class="coin-nav-icon">ğŸ’°</span>
        <span class="coin-nav-title">å……å€¼ä¸­å¿ƒ</span>
      </div>
      {{#if this.isAdmin}}
        <div class="coin-nav-right">
          <button class="coin-nav-btn" {{on "click" this.openAdminModal}}>
            <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"/></svg>
            <span>ç®¡ç†å¥—é¤</span>
          </button>
        </div>
      {{/if}}
    </div>

    {{!-- å½“å‰ä½™é¢å’ŒæŠ˜æ‰£ä¿¡æ¯ --}}
    <div class="pay-balance-card">
      <div class="pay-balance-info">
        <span class="pay-balance-label">å½“å‰ä½™é¢</span>
        <span class="pay-balance-amount">{{model.balance}} {{model.coinName}}</span>
      </div>
      {{#if model.hasDiscount}}
        <div class="pay-discount-badge">
          <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M374.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-320 320c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l320-320zM128 128A64 64 0 1 0 0 128a64 64 0 1 0 128 0zM384 384a64 64 0 1 0 -128 0 64 64 0 1 0 128 0z"/></svg>
          <span>{{model.discountRate}}% æŠ˜æ‰£</span>
        </div>
      {{/if}}
    </div>

    {{!-- å¥—é¤é€‰æ‹© --}}
    <div class="coin-section">
      <div class="section-header">
        <h2 class="section-title">
          <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M512 80c0 18-14.3 34.6-38.4 48c-29.1 16.1-72.5 27.5-122.3 30.9c-3.7-1.8-7.4-3.5-11.3-5C300.6 137.4 248.2 128 192 128c-8.3 0-16.4 .2-24.5 .6l-1.1-.6C142.3 114.6 128 98 128 80c0-44.2 86-80 192-80S512 35.8 512 80zM160.7 161.1c10.2-.7 20.7-1.1 31.3-1.1c62.2 0 117.4 12.3 152.5 31.4C369.3 204.9 384 221.7 384 240c0 4-.7 7.9-2.1 11.7c-4.6 13.2-17 25.3-35 35.5c0 0 0 0 0 0c-.1 .1-.3 .1-.4 .2l0 0 0 0c-.3 .2-.6 .3-.9 .5c-35 19.4-90.8 32-153.6 32c-59.6 0-112.9-11.3-148.2-29.1c-1.9-.9-3.7-1.9-5.5-2.9C14.3 274.6 0 258 0 240c0-34.8 53.4-64.5 128-75.4c10.5-1.5 21.4-2.7 32.7-3.5zM416 240c0-21.9-10.6-39.9-24.1-53.4c28.3-4.4 54.2-11.4 76.2-20.5c16.3-6.8 31.5-15.2 43.9-25.5V176c0 19.3-16.5 37.1-43.8 50.9c-14.6 7.4-32.4 13.7-52.4 18.5c.1-1.8 .2-3.5 .2-5.3zm-32 96c0 18-14.3 34.6-38.4 48c-1.8 1-3.6 1.9-5.5 2.9C304.9 404.7 251.6 416 192 416c-62.8 0-118.6-12.6-153.6-32C14.3 370.6 0 354 0 336V300.6c12.5 10.3 27.6 18.7 43.9 25.5C83.4 342.6 135.8 352 192 352s108.6-9.4 148.1-25.9c7.8-3.2 15.3-6.9 22.4-10.9c6.1-3.4 11.8-7.2 17.2-11.2c1.5-1.1 2.9-2.3 4.3-3.4V336zm32 0V269.5c28.3-4.4 54.2-11.4 76.2-20.5c16.3-6.8 31.5-15.2 43.9-25.5V272c0 44.2-86 80-192 80c-11.1 0-22-1-32.6-2.9c15.2-5.4 29.1-12.1 41.1-19.8c35.7-22.6 63.5-56.1 63.5-97.3z"/></svg>
          <span>é€‰æ‹©å……å€¼å¥—é¤</span>
        </h2>
      </div>
      <div class="package-grid">
        {{#each model.packages as |package|}}
          <div class="package-card {{if (eq this.selectedPackageId package.id) 'selected'}} {{if package.recommended 'recommended'}}" {{on "click" (fn this.selectPackage package)}}>
            {{#if package.recommended}}
              <span class="package-badge">æ¨è</span>
            {{/if}}
            <div class="package-coins">
              <span class="package-coins-num">{{package.coin_amount}}</span>
              <span class="package-coins-unit">{{model.coinName}}</span>
            </div>
            {{#if package.description}}
              <div class="package-desc">{{package.description}}</div>
            {{/if}}
            <div class="package-price">
              {{#if model.hasDiscount}}
                <span class="package-original-price">Â¥{{package.original_price}}</span>
              {{/if}}
              <span class="package-actual-price">Â¥{{package.actual_price}}</span>
            </div>
          </div>
        {{/each}}

        {{!-- è‡ªå®šä¹‰å……å€¼å¡ç‰‡ --}}
        <div class="package-card custom-package {{if this.isCustomMode 'selected'}}" {{on "click" this.selectCustomMode}}>
          <div class="custom-package-icon">
            <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L680 376 376 680l-89.4-89.4L172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"/></svg>
          </div>
          <span class="custom-package-text">è‡ªå®šä¹‰</span>
        </div>
      </div>

      {{!-- è‡ªå®šä¹‰å……å€¼è¾“å…¥æ¡† --}}
      {{#if this.isCustomMode}}
        <div class="custom-input-section">
          <div class="custom-input-wrap">
            <input 
              type="text" 
              class="custom-input" 
              placeholder="è¾“å…¥å……å€¼æ•°é‡" 
              value={{this.customAmount}}
              {{on "input" this.updateCustomAmount}}
            />
            <span class="custom-input-suffix">{{model.coinName}}</span>
          </div>
          {{#if this.customAmountError}}
            <span class="custom-input-error">{{this.customAmountError}}</span>
          {{else}}
            <span class="custom-input-hint">æ”¯æŒ1-10000ï¼Œ1{{model.coinName}}=1å…ƒ{{#if model.hasDiscount}}ï¼ˆäº«{{model.discountRate}}%æŠ˜æ‰£ï¼‰{{/if}}</span>
          {{/if}}
        </div>
      {{/if}}
    </div>

    {{!-- æ”¯ä»˜æ–¹å¼é€‰æ‹© --}}
    <div class="coin-section">
      <div class="section-header">
        <h2 class="section-title">
          <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M64 32C28.7 32 0 60.7 0 96v32H576V96c0-35.3-28.7-64-64-64H64zM576 224H0V416c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V224zM112 352h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16zm112 16c0-8.8 7.2-16 16-16H368c8.8 0 16 7.2 16 16s-7.2 16-16 16H240c-8.8 0-16-7.2-16-16z"/></svg>
          <span>é€‰æ‹©æ”¯ä»˜æ–¹å¼</span>
        </h2>
      </div>
      <div class="payment-methods">
        {{#each model.channels as |channel|}}
          <div class="payment-method {{if (eq this.selectedPaymentType channel.type) 'selected'}}" {{on "click" (fn this.selectPaymentType channel.type)}}>
            <div class="payment-method-icon {{channel.type}}">
              {{#if (eq channel.type "alipay")}}
                <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M377.74 32H70.26C31.41 32 0 63.41 0 102.26v307.48C0 448.59 31.41 480 70.26 480h307.48c38.52 0 69.76-31.08 70.26-69.6-45.96-25.62-110.59-60.34-171.6-88.44-32.07 43.97-84.14 81-148.62 81-70.59 0-93.73-45.3-97.04-76.37-3.97-39.01 14.88-81.5 99.52-81.5 35.38 0 79.35 10.25 127.13 24.96 16.53-30.09 26.45-60.34 26.45-60.34h-178.2v-16.7h92.08v-31.24H88.28v-19.01h109.44V92.34h50.92v50.42h109.44v19.01H248.63v31.24h88.77s-15.21 46.62-38.35 90.92c48.93 16.7 100.01 36.04 148.62 52.74V102.26C447.83 63.57 416.43 32 377.74 32zM47.28 322.95c.99 20.17 10.25 53.73 69.93 53.73 52.07 0 92.58-39.68 117.87-72.9-44.63-18.68-84.48-31.41-109.44-31.41-67.45 0-79.35 33.06-78.36 50.58z"/></svg>
              {{else if (eq channel.type "wxpay")}}
                <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M385.2 167.6c25.9 0 51.3 5.2 74.9 15.2c-6.9-66.8-74.2-118.4-152.7-118.4c-86.1 0-156 59.5-156 132.8c0 42.3 23.4 79.5 60.1 104.3l-15.5 46.5l54.3-27.1c18.3 4.6 37.4 7 57.1 7c8.3 0 16.5-.5 24.5-1.4c-5.1-16.4-7.9-33.8-7.9-51.8c0-59.2 52.8-107.1 117.2-107.1zM128.5 168.1c-13.3 0-24.1-10.8-24.1-24.1s10.8-24.1 24.1-24.1s24.1 10.8 24.1 24.1s-10.8 24.1-24.1 24.1zm128.5 0c-13.3 0-24.1-10.8-24.1-24.1s10.8-24.1 24.1-24.1s24.1 10.8 24.1 24.1s-10.8 24.1-24.1 24.1zM576 274.7c0-59.5-59.5-107.8-132.8-107.8s-132.8 48.3-132.8 107.8s59.5 107.8 132.8 107.8c15.5 0 30.4-2.1 44.3-5.9l42.3 21.1l-12.1-36.2c29.7-20.1 48.3-50.1 48.3-86.8zm-176.5-32.1c-10.8 0-19.5-8.7-19.5-19.5s8.7-19.5 19.5-19.5s19.5 8.7 19.5 19.5s-8.7 19.5-19.5 19.5zm87.5 0c-10.8 0-19.5-8.7-19.5-19.5s8.7-19.5 19.5-19.5s19.5 8.7 19.5 19.5s-8.7 19.5-19.5 19.5z"/></svg>
              {{else if (eq channel.type "paypal")}}
                <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M111.4 295.9c-3.5 19.2-17.4 108.7-21.5 134-.3 1.8-1 2.5-3 2.5H12.3c-7.6 0-13.1-6.6-12.1-13.9L58.8 46.6c1.5-9.6 10.1-16.9 20-16.9 152.3 0 165.1-3.7 204 11.4 60.1 23.3 65.6 79.5 44 140.3-21.5 62.6-72.5 89.5-140.1 90.3-43.4 .7-69.5-7-75.3 24.2zM357.1 152c-1.8-1.3-2.5-1.8-3 1.3-2 11.4-5.1 22.5-8.8 33.6-39.9 113.8-150.5 103.9-204.5 103.9-6.1 0-10.1 3.3-10.9 9.4-22.6 140.4-27.1 169.7-27.1 169.7-1 7.1 3.5 12.9 10.6 12.9h63.5c8.6 0 15.7-6.3 17.4-14.9 .7-5.4-1.1 6.1 14.4-91.3 4.6-22 14.3-19.7 29.3-19.7 71 0 126.4-28.8 142.9-112.3 6.5-34.8 4.6-71.4-23.8-92.6z"/></svg>
              {{else}}
                <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M64 32C28.7 32 0 60.7 0 96v32H576V96c0-35.3-28.7-64-64-64H64zM576 224H0V416c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V224z"/></svg>
              {{/if}}
            </div>
            <span class="payment-method-name">{{channel.name}}</span>
            {{#if (eq this.selectedPaymentType channel.type)}}
              <div class="payment-method-check">
                <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg>
              </div>
            {{/if}}
          </div>
        {{/each}}
      </div>
    </div>

    {{!-- æ”¯ä»˜æŒ‰é’®åŒºåŸŸ --}}
    <div class="pay-footer">
      <div class="pay-summary">
        <span class="pay-label">åº”ä»˜é‡‘é¢</span>
        <span class="pay-amount">Â¥{{this.totalAmount}}</span>
        {{#if this.totalCoins}}
          <span class="pay-coins">è·å¾— {{this.totalCoins}} {{model.coinName}}</span>
        {{/if}}
      </div>
      <button class="pay-btn" {{on "click" this.submitPayment}} disabled={{this.payDisabled}}>
        {{#if this.isLoading}}
          <span>å¤„ç†ä¸­...</span>
        {{else}}
          <span>ç«‹å³æ”¯ä»˜</span>
        {{/if}}
      </button>
    </div>
  </div>

  {{!-- äºŒç»´ç æ”¯ä»˜æ¨¡æ€æ¡† --}}
  {{#if this.showQrcodeModal}}
    <div class="coin-modal-overlay" {{on "click" this.closeQrcodeModal}}>
      <div class="coin-modal qrcode-modal" {{on "click" this.stopPropagation}}>
        <div class="modal-header">
          <div class="modal-title-wrap">
            <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 80C0 53.5 21.5 32 48 32h96c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80zM64 96v64h64V96H64zM0 336c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V336zm64 16v64h64V352H64zM304 32h96c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H304c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48zm16 64v64h64V96H320z"/></svg>
            <h3>æ‰«ç æ”¯ä»˜</h3>
          </div>
          <button class="modal-close-btn" {{on "click" this.closeQrcodeModal}}>
            <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>
          </button>
        </div>
        <div class="modal-body qrcode-body">
          <img src="{{this.qrcodeUrl}}" alt="æ”¯ä»˜äºŒç»´ç " class="qrcode-image" />
          <p class="qrcode-hint">è¯·ä½¿ç”¨{{this.paymentTypeName}}æ‰«ç æ”¯ä»˜</p>
          <p class="qrcode-amount">Â¥{{this.totalAmount}}</p>
          <p class="qrcode-status">æ”¯ä»˜å®Œæˆåå°†è‡ªåŠ¨è·³è½¬...</p>
        </div>
      </div>
    </div>
  {{/if}}

  {{!-- ç®¡ç†å‘˜å¥—é¤ç®¡ç†æ¨¡æ€æ¡† --}}
  {{#if this.showAdminModal}}
    <div class="coin-modal-overlay" {{on "click" this.closeAdminModal}}>
      <div class="coin-modal coin-modal-lg admin-modal" {{on "click" this.stopPropagation}}>
        <div class="modal-header">
          <div class="modal-title-wrap">
            <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"/></svg>
            <h3>å¥—é¤ç®¡ç†</h3>
          </div>
          <button class="modal-close-btn" {{on "click" this.closeAdminModal}}>
            <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>
          </button>
        </div>
        <div class="modal-body admin-modal-body">
          <div class="admin-actions-bar">
            <button class="admin-action-btn primary" {{on "click" this.openCreateModal}}>
              <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/></svg>
              <span>æ·»åŠ å¥—é¤</span>
            </button>
            <button class="admin-action-btn secondary" {{on "click" this.seedPackages}}>
              <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160H352c-17.7 0-32 14.3-32 32s14.3 32 32 32H463.5c0 0 0 0 0 0h.4c17.7 0 32-14.3 32-32V80c0-17.7-14.3-32-32-32s-32 14.3-32 32v35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1V432c0 17.7 14.3 32 32 32s32-14.3 32-32V396.9l17.6 17.5 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.7c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352H160c17.7 0 32-14.3 32-32s-14.3-32-32-32H48.4c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"/></svg>
              <span>ä¸€é”®æ·»åŠ ç¤ºä¾‹</span>
            </button>
          </div>

          {{#if this.isAdminLoading}}
            <div class="admin-loading">
              <span>åŠ è½½ä¸­...</span>
            </div>
          {{else if this.adminPackages.length}}
            <div class="admin-package-list">
              {{#each this.adminPackages as |pkg|}}
                <div class="admin-package-item {{unless pkg.active 'inactive'}}">
                  <div class="admin-package-info">
                    <div class="admin-package-main">
                      <span class="admin-package-coins">{{pkg.coin_amount}} {{model.coinName}}</span>
                      <span class="admin-package-price">Â¥{{pkg.price}}</span>
                      {{#if pkg.recommended}}
                        <span class="admin-package-tag recommended">æ¨è</span>
                      {{/if}}
                      {{#unless pkg.active}}
                        <span class="admin-package-tag inactive">å·²ä¸‹æ¶</span>
                      {{/unless}}
                    </div>
                    {{#if pkg.description}}
                      <span class="admin-package-desc">{{pkg.description}}</span>
                    {{/if}}
                  </div>
                  <div class="admin-package-actions">
                    <button class="admin-pkg-btn" title="{{if pkg.active 'ä¸‹æ¶' 'ä¸Šæ¶'}}" {{on "click" (fn this.togglePackageActive pkg)}}>
                      {{#if pkg.active}}
                        <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C256.7 126.1 287.5 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-14.1 8-29.3 8-45.5c0-70.7-57.3-128-128-128c-32.2 0-61.7 11.9-84.2 31.5l-46.1-36.1zM135.3 160c-28.7 28.7-51.5 62.2-68.8 95.4c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C206.5 443.2 271.2 480 352 480c44.3 0 84.3-11.5 119.6-29.2L135.3 160z"/></svg>
                      {{else}}
                        <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"/></svg>
                      {{/if}}
                    </button>
                    <button class="admin-pkg-btn" title="ç¼–è¾‘" {{on "click" (fn this.openEditModal pkg)}}>
                      <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L680 376 376 680l-89.4-89.4L172.4 241.7z"/></svg>
                    </button>
                    <button class="admin-pkg-btn danger" title="åˆ é™¤" {{on "click" (fn this.deletePackage pkg)}}>
                      <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"/></svg>
                    </button>
                  </div>
                </div>
              {{/each}}
            </div>
          {{else}}
            <div class="admin-empty">
              <span>æš‚æ— å¥—é¤ï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ </span>
            </div>
          {{/if}}
        </div>
      </div>
    </div>
  {{/if}}

  {{!-- ç¼–è¾‘/åˆ›å»ºå¥—é¤æ¨¡æ€æ¡† --}}
  {{#if this.showEditModal}}
    <div class="coin-modal-overlay" {{on "click" this.closeEditModal}}>
      <div class="coin-modal" {{on "click" this.stopPropagation}}>
        <div class="modal-header">
          <div class="modal-title-wrap">
            <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L680 376 376 680l-89.4-89.4L172.4 241.7z"/></svg>
            <h3>{{if this.editingPackage "ç¼–è¾‘å¥—é¤" "æ·»åŠ å¥—é¤"}}</h3>
          </div>
          <button class="modal-close-btn" {{on "click" this.closeEditModal}}>
            <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-row">
            <div class="form-field">
              <label class="form-label">{{model.coinName}}æ•°é‡</label>
              <input type="number" class="form-input" value={{this.editCoinAmount}} {{on "input" (fn this.updateEditField "editCoinAmount")}} placeholder="å¦‚ï¼š100" />
            </div>
            <div class="form-field">
              <label class="form-label">ä»·æ ¼ï¼ˆå…ƒï¼‰</label>
              <input type="number" step="0.01" class="form-input" value={{this.editPrice}} {{on "input" (fn this.updateEditField "editPrice")}} placeholder="å¦‚ï¼š100" />
            </div>
          </div>
          <div class="form-field">
            <label class="form-label">æè¿° <span class="optional">ï¼ˆå¯é€‰ï¼‰</span></label>
            <input type="text" class="form-input" value={{this.editDescription}} {{on "input" (fn this.updateEditField "editDescription")}} placeholder="å¦‚ï¼šè¶…å€¼å¥—é¤" />
          </div>
          <div class="form-row">
            <div class="form-field">
              <label class="form-label">æ’åº</label>
              <input type="number" class="form-input" value={{this.editDisplayOrder}} {{on "input" (fn this.updateEditField "editDisplayOrder")}} placeholder="æ•°å­—è¶Šå°è¶Šé å‰" />
            </div>
          </div>
          <div class="form-row checkbox-row">
            <label class="form-checkbox" {{on "click" (fn this.toggleEditCheckbox "editRecommended")}}>
              <input type="checkbox" checked={{this.editRecommended}} />
              <span class="checkbox-label">æ¨èå¥—é¤</span>
            </label>
            <label class="form-checkbox" {{on "click" (fn this.toggleEditCheckbox "editActive")}}>
              <input type="checkbox" checked={{this.editActive}} />
              <span class="checkbox-label">å¯ç”¨</span>
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button class="modal-btn cancel" {{on "click" this.closeEditModal}}>å–æ¶ˆ</button>
          <button class="modal-btn primary" {{on "click" this.savePackage}} disabled={{this.isAdminLoading}}>
            {{if this.isAdminLoading "ä¿å­˜ä¸­..." "ä¿å­˜"}}
          </button>
        </div>
      </div>
    </div>
  {{/if}}
</div>
